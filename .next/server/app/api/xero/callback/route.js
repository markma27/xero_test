"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/xero/callback/route";
exports.ids = ["app/api/xero/callback/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fxero%2Fcallback%2Froute&page=%2Fapi%2Fxero%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fxero%2Fcallback%2Froute.ts&appDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fxero%2Fcallback%2Froute&page=%2Fapi%2Fxero%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fxero%2Fcallback%2Froute.ts&appDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_mayin_Desktop_xero_test_src_app_api_xero_callback_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/app/api/xero/callback/route.ts */ \"(rsc)/./src/app/api/xero/callback/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/xero/callback/route\",\n        pathname: \"/api/xero/callback\",\n        filename: \"route\",\n        bundlePath: \"app/api/xero/callback/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\mayin\\\\Desktop\\\\xero_test\\\\src\\\\app\\\\api\\\\xero\\\\callback\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_mayin_Desktop_xero_test_src_app_api_xero_callback_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/xero/callback/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4wLjBfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ4ZXJvJTJGY2FsbGJhY2slMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnhlcm8lMkZjYWxsYmFjayUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnhlcm8lMkZjYWxsYmFjayUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtYXlpbiU1Q0Rlc2t0b3AlNUN4ZXJvX3Rlc3QlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q21heWluJTVDRGVza3RvcCU1Q3hlcm9fdGVzdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDMkM7QUFDMUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veGVyby1vYXV0aC1wcm90b3R5cGUvPzlmMTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcbWF5aW5cXFxcRGVza3RvcFxcXFx4ZXJvX3Rlc3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxceGVyb1xcXFxjYWxsYmFja1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkveGVyby9jYWxsYmFjay9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3hlcm8vY2FsbGJhY2tcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3hlcm8vY2FsbGJhY2svcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxtYXlpblxcXFxEZXNrdG9wXFxcXHhlcm9fdGVzdFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx4ZXJvXFxcXGNhbGxiYWNrXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3hlcm8vY2FsbGJhY2svcm91dGVcIjtcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fxero%2Fcallback%2Froute&page=%2Fapi%2Fxero%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fxero%2Fcallback%2Froute.ts&appDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/xero/callback/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/xero/callback/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/.pnpm/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_xero__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/xero */ \"(rsc)/./src/lib/xero.ts\");\n\n\nasync function GET(req) {\n    try {\n        const xero = (0,_lib_xero__WEBPACK_IMPORTED_MODULE_1__.newXeroClient)();\n        const tokenSet = await xero.apiCallback(req.url);\n        console.log(\"Token set received:\", {\n            access_token: tokenSet.access_token ? \"present\" : \"missing\",\n            refresh_token: tokenSet.refresh_token ? \"present\" : \"missing\",\n            expires_at: tokenSet.expires_at,\n            scopes: tokenSet.scope\n        });\n        // Load tenants (this is effectively connections)\n        const tenants = await xero.updateTenants();\n        console.log(\"Tenants found:\", tenants?.length || 0);\n        console.log(\"Tenants data:\", tenants);\n        const tenantId = tenants?.[0]?.tenantId;\n        if (!tenantId) {\n            console.error(\"No tenant found. Available tenants:\", tenants);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No tenant connection\",\n                debug: {\n                    tenantsCount: tenants?.length || 0,\n                    tenants: tenants,\n                    tokenScopes: tokenSet.scope\n                }\n            }, {\n                status: 400\n            });\n        }\n        await (0,_lib_xero__WEBPACK_IMPORTED_MODULE_1__.saveTokenSet)(tenantId, tokenSet);\n        const baseUrl = process.env.NEXTAUTH_URL || \"http://localhost:3000\";\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(`${baseUrl}/xero/connected?tenantId=${tenantId}`);\n    } catch (error) {\n        console.error(\"OAuth callback error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"OAuth callback failed\",\n            message: error.message,\n            details: error.toString()\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS94ZXJvL2NhbGxiYWNrL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RDtBQUNDO0FBRWxELGVBQWVHLElBQUlDLEdBQWdCO0lBQ3hDLElBQUk7UUFDRixNQUFNQyxPQUFPSix3REFBYUE7UUFDMUIsTUFBTUssV0FBVyxNQUFNRCxLQUFLRSxXQUFXLENBQUNILElBQUlJLEdBQUc7UUFFL0NDLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUI7WUFDakNDLGNBQWNMLFNBQVNLLFlBQVksR0FBRyxZQUFZO1lBQ2xEQyxlQUFlTixTQUFTTSxhQUFhLEdBQUcsWUFBWTtZQUNwREMsWUFBWVAsU0FBU08sVUFBVTtZQUMvQkMsUUFBUVIsU0FBU1MsS0FBSztRQUN4QjtRQUVBLGlEQUFpRDtRQUNqRCxNQUFNQyxVQUFVLE1BQU1YLEtBQUtZLGFBQWE7UUFDeENSLFFBQVFDLEdBQUcsQ0FBQyxrQkFBa0JNLFNBQVNFLFVBQVU7UUFDakRULFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUJNO1FBRTdCLE1BQU1HLFdBQVdILFNBQVMsQ0FBQyxFQUFFLEVBQUVHO1FBRS9CLElBQUksQ0FBQ0EsVUFBVTtZQUNiVixRQUFRVyxLQUFLLENBQUMsdUNBQXVDSjtZQUNyRCxPQUFPaEIsa0ZBQVlBLENBQUNxQixJQUFJLENBQUM7Z0JBQ3ZCRCxPQUFPO2dCQUNQRSxPQUFPO29CQUNMQyxjQUFjUCxTQUFTRSxVQUFVO29CQUNqQ0YsU0FBU0E7b0JBQ1RRLGFBQWFsQixTQUFTUyxLQUFLO2dCQUM3QjtZQUNGLEdBQUc7Z0JBQUVVLFFBQVE7WUFBSTtRQUNuQjtRQUVBLE1BQU12Qix1REFBWUEsQ0FBQ2lCLFVBQVViO1FBQzdCLE1BQU1vQixVQUFVQyxRQUFRQyxHQUFHLENBQUNDLFlBQVksSUFBSTtRQUM1QyxPQUFPN0Isa0ZBQVlBLENBQUM4QixRQUFRLENBQUMsQ0FBQyxFQUFFSixRQUFRLHlCQUF5QixFQUFFUCxTQUFTLENBQUM7SUFDL0UsRUFBRSxPQUFPQyxPQUFZO1FBQ25CWCxRQUFRVyxLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPcEIsa0ZBQVlBLENBQUNxQixJQUFJLENBQUM7WUFDdkJELE9BQU87WUFDUFcsU0FBU1gsTUFBTVcsT0FBTztZQUN0QkMsU0FBU1osTUFBTWEsUUFBUTtRQUN6QixHQUFHO1lBQUVSLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veGVyby1vYXV0aC1wcm90b3R5cGUvLi9zcmMvYXBwL2FwaS94ZXJvL2NhbGxiYWNrL3JvdXRlLnRzPzcxZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBuZXdYZXJvQ2xpZW50LCBzYXZlVG9rZW5TZXQgfSBmcm9tIFwiQC9saWIveGVyb1wiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHhlcm8gPSBuZXdYZXJvQ2xpZW50KCk7XHJcbiAgICBjb25zdCB0b2tlblNldCA9IGF3YWl0IHhlcm8uYXBpQ2FsbGJhY2socmVxLnVybCk7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gc2V0IHJlY2VpdmVkOlwiLCB7XHJcbiAgICAgIGFjY2Vzc190b2tlbjogdG9rZW5TZXQuYWNjZXNzX3Rva2VuID8gXCJwcmVzZW50XCIgOiBcIm1pc3NpbmdcIixcclxuICAgICAgcmVmcmVzaF90b2tlbjogdG9rZW5TZXQucmVmcmVzaF90b2tlbiA/IFwicHJlc2VudFwiIDogXCJtaXNzaW5nXCIsXHJcbiAgICAgIGV4cGlyZXNfYXQ6IHRva2VuU2V0LmV4cGlyZXNfYXQsXHJcbiAgICAgIHNjb3BlczogdG9rZW5TZXQuc2NvcGVcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBMb2FkIHRlbmFudHMgKHRoaXMgaXMgZWZmZWN0aXZlbHkgY29ubmVjdGlvbnMpXHJcbiAgICBjb25zdCB0ZW5hbnRzID0gYXdhaXQgeGVyby51cGRhdGVUZW5hbnRzKCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIlRlbmFudHMgZm91bmQ6XCIsIHRlbmFudHM/Lmxlbmd0aCB8fCAwKTtcclxuICAgIGNvbnNvbGUubG9nKFwiVGVuYW50cyBkYXRhOlwiLCB0ZW5hbnRzKTtcclxuICAgIFxyXG4gICAgY29uc3QgdGVuYW50SWQgPSB0ZW5hbnRzPy5bMF0/LnRlbmFudElkO1xyXG4gICAgXHJcbiAgICBpZiAoIXRlbmFudElkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyB0ZW5hbnQgZm91bmQuIEF2YWlsYWJsZSB0ZW5hbnRzOlwiLCB0ZW5hbnRzKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgICAgZXJyb3I6IFwiTm8gdGVuYW50IGNvbm5lY3Rpb25cIiwgXHJcbiAgICAgICAgZGVidWc6IHtcclxuICAgICAgICAgIHRlbmFudHNDb3VudDogdGVuYW50cz8ubGVuZ3RoIHx8IDAsXHJcbiAgICAgICAgICB0ZW5hbnRzOiB0ZW5hbnRzLFxyXG4gICAgICAgICAgdG9rZW5TY29wZXM6IHRva2VuU2V0LnNjb3BlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhd2FpdCBzYXZlVG9rZW5TZXQodGVuYW50SWQsIHRva2VuU2V0KTtcclxuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCc7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGAke2Jhc2VVcmx9L3hlcm8vY29ubmVjdGVkP3RlbmFudElkPSR7dGVuYW50SWR9YCk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIk9BdXRoIGNhbGxiYWNrIGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcclxuICAgICAgZXJyb3I6IFwiT0F1dGggY2FsbGJhY2sgZmFpbGVkXCIsIFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICBkZXRhaWxzOiBlcnJvci50b1N0cmluZygpXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibmV3WGVyb0NsaWVudCIsInNhdmVUb2tlblNldCIsIkdFVCIsInJlcSIsInhlcm8iLCJ0b2tlblNldCIsImFwaUNhbGxiYWNrIiwidXJsIiwiY29uc29sZSIsImxvZyIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hfdG9rZW4iLCJleHBpcmVzX2F0Iiwic2NvcGVzIiwic2NvcGUiLCJ0ZW5hbnRzIiwidXBkYXRlVGVuYW50cyIsImxlbmd0aCIsInRlbmFudElkIiwiZXJyb3IiLCJqc29uIiwiZGVidWciLCJ0ZW5hbnRzQ291bnQiLCJ0b2tlblNjb3BlcyIsInN0YXR1cyIsImJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfVVJMIiwicmVkaXJlY3QiLCJtZXNzYWdlIiwiZGV0YWlscyIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/xero/callback/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/crypto.ts":
/*!***************************!*\
  !*** ./src/lib/crypto.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst key = Buffer.from(process.env.XERO_TOKEN_ENC_KEY || \"\", \"base64\");\nif (key.length !== 32) {\n    throw new Error(\"XERO_TOKEN_ENC_KEY must be 32 bytes (base64)\");\n}\nfunction encrypt(plain) {\n    const iv = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(12);\n    const cipher = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createCipheriv)(\"aes-256-gcm\", key, iv);\n    const enc = Buffer.concat([\n        cipher.update(plain, \"utf8\"),\n        cipher.final()\n    ]);\n    const tag = cipher.getAuthTag();\n    return Buffer.concat([\n        iv,\n        tag,\n        enc\n    ]).toString(\"base64\");\n}\nfunction decrypt(blob) {\n    const data = Buffer.from(blob, \"base64\");\n    const iv = data.subarray(0, 12);\n    const tag = data.subarray(12, 28);\n    const enc = data.subarray(28);\n    const decipher = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createDecipheriv)(\"aes-256-gcm\", key, iv);\n    decipher.setAuthTag(tag);\n    const dec = Buffer.concat([\n        decipher.update(enc),\n        decipher.final()\n    ]);\n    return dec.toString(\"utf8\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2NyeXB0by50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVFO0FBRXZFLE1BQU1HLE1BQU1DLE9BQU9DLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxrQkFBa0IsSUFBSSxJQUFJO0FBQzlELElBQUlMLElBQUlNLE1BQU0sS0FBSyxJQUFJO0lBQ3JCLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVPLFNBQVNDLFFBQVFDLEtBQWE7SUFDbkMsTUFBTUMsS0FBS1gsbURBQVdBLENBQUM7SUFDdkIsTUFBTVksU0FBU2Qsc0RBQWNBLENBQUMsZUFBZUcsS0FBS1U7SUFDbEQsTUFBTUUsTUFBTVgsT0FBT1ksTUFBTSxDQUFDO1FBQUNGLE9BQU9HLE1BQU0sQ0FBQ0wsT0FBTztRQUFTRSxPQUFPSSxLQUFLO0tBQUc7SUFDeEUsTUFBTUMsTUFBTUwsT0FBT00sVUFBVTtJQUM3QixPQUFPaEIsT0FBT1ksTUFBTSxDQUFDO1FBQUNIO1FBQUlNO1FBQUtKO0tBQUksRUFBRU0sUUFBUSxDQUFDO0FBQ2hEO0FBRU8sU0FBU0MsUUFBUUMsSUFBWTtJQUNsQyxNQUFNQyxPQUFPcEIsT0FBT0MsSUFBSSxDQUFDa0IsTUFBTTtJQUMvQixNQUFNVixLQUFLVyxLQUFLQyxRQUFRLENBQUMsR0FBRztJQUM1QixNQUFNTixNQUFNSyxLQUFLQyxRQUFRLENBQUMsSUFBSTtJQUM5QixNQUFNVixNQUFNUyxLQUFLQyxRQUFRLENBQUM7SUFDMUIsTUFBTUMsV0FBV3pCLHdEQUFnQkEsQ0FBQyxlQUFlRSxLQUFLVTtJQUN0RGEsU0FBU0MsVUFBVSxDQUFDUjtJQUNwQixNQUFNUyxNQUFNeEIsT0FBT1ksTUFBTSxDQUFDO1FBQUNVLFNBQVNULE1BQU0sQ0FBQ0Y7UUFBTVcsU0FBU1IsS0FBSztLQUFHO0lBQ2xFLE9BQU9VLElBQUlQLFFBQVEsQ0FBQztBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3hlcm8tb2F1dGgtcHJvdG90eXBlLy4vc3JjL2xpYi9jcnlwdG8udHM/NTBiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDaXBoZXJpdiwgY3JlYXRlRGVjaXBoZXJpdiwgcmFuZG9tQnl0ZXMgfSBmcm9tIFwiY3J5cHRvXCI7XHJcblxyXG5jb25zdCBrZXkgPSBCdWZmZXIuZnJvbShwcm9jZXNzLmVudi5YRVJPX1RPS0VOX0VOQ19LRVkgfHwgXCJcIiwgXCJiYXNlNjRcIik7XHJcbmlmIChrZXkubGVuZ3RoICE9PSAzMikge1xyXG4gIHRocm93IG5ldyBFcnJvcihcIlhFUk9fVE9LRU5fRU5DX0tFWSBtdXN0IGJlIDMyIGJ5dGVzIChiYXNlNjQpXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdChwbGFpbjogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBpdiA9IHJhbmRvbUJ5dGVzKDEyKTtcclxuICBjb25zdCBjaXBoZXIgPSBjcmVhdGVDaXBoZXJpdihcImFlcy0yNTYtZ2NtXCIsIGtleSwgaXYpO1xyXG4gIGNvbnN0IGVuYyA9IEJ1ZmZlci5jb25jYXQoW2NpcGhlci51cGRhdGUocGxhaW4sIFwidXRmOFwiKSwgY2lwaGVyLmZpbmFsKCldKTtcclxuICBjb25zdCB0YWcgPSBjaXBoZXIuZ2V0QXV0aFRhZygpO1xyXG4gIHJldHVybiBCdWZmZXIuY29uY2F0KFtpdiwgdGFnLCBlbmNdKS50b1N0cmluZyhcImJhc2U2NFwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlY3J5cHQoYmxvYjogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBkYXRhID0gQnVmZmVyLmZyb20oYmxvYiwgXCJiYXNlNjRcIik7XHJcbiAgY29uc3QgaXYgPSBkYXRhLnN1YmFycmF5KDAsIDEyKTtcclxuICBjb25zdCB0YWcgPSBkYXRhLnN1YmFycmF5KDEyLCAyOCk7XHJcbiAgY29uc3QgZW5jID0gZGF0YS5zdWJhcnJheSgyOCk7XHJcbiAgY29uc3QgZGVjaXBoZXIgPSBjcmVhdGVEZWNpcGhlcml2KFwiYWVzLTI1Ni1nY21cIiwga2V5LCBpdik7XHJcbiAgZGVjaXBoZXIuc2V0QXV0aFRhZyh0YWcpO1xyXG4gIGNvbnN0IGRlYyA9IEJ1ZmZlci5jb25jYXQoW2RlY2lwaGVyLnVwZGF0ZShlbmMpLCBkZWNpcGhlci5maW5hbCgpXSk7XHJcbiAgcmV0dXJuIGRlYy50b1N0cmluZyhcInV0ZjhcIik7XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNpcGhlcml2IiwiY3JlYXRlRGVjaXBoZXJpdiIsInJhbmRvbUJ5dGVzIiwia2V5IiwiQnVmZmVyIiwiZnJvbSIsInByb2Nlc3MiLCJlbnYiLCJYRVJPX1RPS0VOX0VOQ19LRVkiLCJsZW5ndGgiLCJFcnJvciIsImVuY3J5cHQiLCJwbGFpbiIsIml2IiwiY2lwaGVyIiwiZW5jIiwiY29uY2F0IiwidXBkYXRlIiwiZmluYWwiLCJ0YWciLCJnZXRBdXRoVGFnIiwidG9TdHJpbmciLCJkZWNyeXB0IiwiYmxvYiIsImRhdGEiLCJzdWJhcnJheSIsImRlY2lwaGVyIiwic2V0QXV0aFRhZyIsImRlYyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/crypto.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabaseAdmin.ts":
/*!**********************************!*\
  !*** ./src/lib/supabaseAdmin.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/.pnpm/@supabase+supabase-js@2.57.4/node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst url = process.env.SUPABASE_URL;\nconst key = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, key, {\n    auth: {\n        persistSession: false\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlQWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFFckQsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBQ3BDLE1BQU1DLE1BQU1ILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0FBRTFDLE1BQU1DLGdCQUFnQlAsbUVBQVlBLENBQUNDLEtBQUtJLEtBQUs7SUFDbERHLE1BQU07UUFBRUMsZ0JBQWdCO0lBQU07QUFDaEMsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3hlcm8tb2F1dGgtcHJvdG90eXBlLy4vc3JjL2xpYi9zdXBhYmFzZUFkbWluLnRzP2ViOGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zdXBhYmFzZS1qc1wiO1xyXG5cclxuY29uc3QgdXJsID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMITtcclxuY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSE7XHJcblxyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudCh1cmwsIGtleSwgeyBcclxuICBhdXRoOiB7IHBlcnNpc3RTZXNzaW9uOiBmYWxzZSB9IFxyXG59KTtcclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJrZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJwZXJzaXN0U2Vzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabaseAdmin.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/xero.ts":
/*!*************************!*\
  !*** ./src/lib/xero.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientWithTokens: () => (/* binding */ getClientWithTokens),\n/* harmony export */   newXeroClient: () => (/* binding */ newXeroClient),\n/* harmony export */   saveTokenSet: () => (/* binding */ saveTokenSet)\n/* harmony export */ });\n/* harmony import */ var xero_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! xero-node */ \"(rsc)/./node_modules/.pnpm/xero-node@13.0.0/node_modules/xero-node/dist/index.js\");\n/* harmony import */ var xero_node__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(xero_node__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./supabaseAdmin */ \"(rsc)/./src/lib/supabaseAdmin.ts\");\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./crypto */ \"(rsc)/./src/lib/crypto.ts\");\n\n\n\nfunction newXeroClient() {\n    return new xero_node__WEBPACK_IMPORTED_MODULE_0__.XeroClient({\n        clientId: process.env.XERO_CLIENT_ID,\n        clientSecret: process.env.XERO_CLIENT_SECRET,\n        redirectUris: [\n            process.env.XERO_REDIRECT_URI\n        ],\n        scopes: [\n            \"openid\",\n            \"profile\",\n            \"email\",\n            \"offline_access\",\n            \"accounting.settings\"\n        ]\n    });\n}\nasync function saveTokenSet(tenantId, tokenSet) {\n    const tokenJson = JSON.stringify(tokenSet);\n    const expiresAt = tokenSet.expires_at ? new Date(tokenSet.expires_at * 1000).toISOString() : new Date(Date.now() + 3600000).toISOString();\n    const { error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"xero_tokens\").upsert({\n        tenant_id: tenantId,\n        token_set_enc: (0,_crypto__WEBPACK_IMPORTED_MODULE_2__.encrypt)(tokenJson),\n        expires_at: expiresAt,\n        updated_at: new Date().toISOString()\n    }, {\n        onConflict: \"tenant_id\"\n    });\n    if (error) throw new Error(error.message);\n}\nasync function loadTokenSet(tenantId) {\n    const { data, error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"xero_tokens\").select(\"*\").eq(\"tenant_id\", tenantId).single();\n    if (error || !data) throw new Error(\"No token for tenant\");\n    return JSON.parse((0,_crypto__WEBPACK_IMPORTED_MODULE_2__.decrypt)(data.token_set_enc));\n}\nasync function getClientWithTokens(tenantId) {\n    const xero = newXeroClient();\n    const tokenSet = await loadTokenSet(tenantId);\n    xero.setTokenSet(tokenSet);\n    // refresh if needed\n    const exp = tokenSet.expires_at ? tokenSet.expires_at * 1000 : 0;\n    if (exp && exp < Date.now() + 60000) {\n        const refreshed = await xero.refreshToken();\n        const tenants = await xero.updateTenants();\n        const tid = tenants?.[0]?.tenantId || tenantId;\n        await saveTokenSet(tid, refreshed);\n        return {\n            xero,\n            tenantId: tid\n        };\n    }\n    const tenants = await xero.updateTenants();\n    return {\n        xero,\n        tenantId: tenants?.[0]?.tenantId || tenantId\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3hlcm8udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRDtBQUNEO0FBQ0o7QUFFckMsU0FBU0k7SUFDZCxPQUFPLElBQUlKLGlEQUFVQSxDQUFDO1FBQ3BCSyxVQUFVQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7UUFDcENDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csa0JBQWtCO1FBQzVDQyxjQUFjO1lBQUNMLFFBQVFDLEdBQUcsQ0FBQ0ssaUJBQWlCO1NBQUU7UUFDOUNDLFFBQVE7WUFBQztZQUFVO1lBQVc7WUFBUztZQUFrQjtTQUFzQjtJQUNqRjtBQUNGO0FBRU8sZUFBZUMsYUFBYUMsUUFBZ0IsRUFBRUMsUUFBa0I7SUFDckUsTUFBTUMsWUFBWUMsS0FBS0MsU0FBUyxDQUFDSDtJQUNqQyxNQUFNSSxZQUFZSixTQUFTSyxVQUFVLEdBQ2pDLElBQUlDLEtBQUtOLFNBQVNLLFVBQVUsR0FBRyxNQUFNRSxXQUFXLEtBQ2hELElBQUlELEtBQUtBLEtBQUtFLEdBQUcsS0FBSyxTQUFVRCxXQUFXO0lBRS9DLE1BQU0sRUFBRUUsS0FBSyxFQUFFLEdBQUcsTUFBTXhCLHlEQUFhQSxDQUFDeUIsSUFBSSxDQUFDLGVBQWVDLE1BQU0sQ0FBQztRQUMvREMsV0FBV2I7UUFDWGMsZUFBZTNCLGdEQUFPQSxDQUFDZTtRQUN2QkksWUFBWUQ7UUFDWlUsWUFBWSxJQUFJUixPQUFPQyxXQUFXO0lBQ3BDLEdBQUc7UUFBRVEsWUFBWTtJQUFZO0lBRTdCLElBQUlOLE9BQU8sTUFBTSxJQUFJTyxNQUFNUCxNQUFNUSxPQUFPO0FBQzFDO0FBRUEsZUFBZUMsYUFBYW5CLFFBQWdCO0lBQzFDLE1BQU0sRUFBRW9CLElBQUksRUFBRVYsS0FBSyxFQUFFLEdBQUcsTUFBTXhCLHlEQUFhQSxDQUN4Q3lCLElBQUksQ0FBQyxlQUNMVSxNQUFNLENBQUMsS0FDUEMsRUFBRSxDQUFDLGFBQWF0QixVQUNoQnVCLE1BQU07SUFFVCxJQUFJYixTQUFTLENBQUNVLE1BQU0sTUFBTSxJQUFJSCxNQUFNO0lBQ3BDLE9BQU9kLEtBQUtxQixLQUFLLENBQUNwQyxnREFBT0EsQ0FBQ2dDLEtBQUtOLGFBQWE7QUFDOUM7QUFFTyxlQUFlVyxvQkFBb0J6QixRQUFnQjtJQUN4RCxNQUFNMEIsT0FBT3JDO0lBQ2IsTUFBTVksV0FBVyxNQUFNa0IsYUFBYW5CO0lBQ3BDMEIsS0FBS0MsV0FBVyxDQUFDMUI7SUFFakIsb0JBQW9CO0lBQ3BCLE1BQU0yQixNQUFNM0IsU0FBU0ssVUFBVSxHQUFHTCxTQUFTSyxVQUFVLEdBQUcsT0FBTztJQUMvRCxJQUFJc0IsT0FBT0EsTUFBTXJCLEtBQUtFLEdBQUcsS0FBSyxPQUFRO1FBQ3BDLE1BQU1vQixZQUFZLE1BQU1ILEtBQUtJLFlBQVk7UUFDekMsTUFBTUMsVUFBVSxNQUFNTCxLQUFLTSxhQUFhO1FBQ3hDLE1BQU1DLE1BQU1GLFNBQVMsQ0FBQyxFQUFFLEVBQUUvQixZQUFZQTtRQUN0QyxNQUFNRCxhQUFha0MsS0FBS0o7UUFDeEIsT0FBTztZQUFFSDtZQUFNMUIsVUFBVWlDO1FBQUk7SUFDL0I7SUFFQSxNQUFNRixVQUFVLE1BQU1MLEtBQUtNLGFBQWE7SUFDeEMsT0FBTztRQUFFTjtRQUFNMUIsVUFBVStCLFNBQVMsQ0FBQyxFQUFFLEVBQUUvQixZQUFZQTtJQUFTO0FBQzlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veGVyby1vYXV0aC1wcm90b3R5cGUvLi9zcmMvbGliL3hlcm8udHM/ZDNiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBYZXJvQ2xpZW50LCBUb2tlblNldCB9IGZyb20gXCJ4ZXJvLW5vZGVcIjtcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gXCIuL3N1cGFiYXNlQWRtaW5cIjtcclxuaW1wb3J0IHsgZW5jcnlwdCwgZGVjcnlwdCB9IGZyb20gXCIuL2NyeXB0b1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG5ld1hlcm9DbGllbnQoKSB7XHJcbiAgcmV0dXJuIG5ldyBYZXJvQ2xpZW50KHtcclxuICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5YRVJPX0NMSUVOVF9JRCEsXHJcbiAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LlhFUk9fQ0xJRU5UX1NFQ1JFVCEsXHJcbiAgICByZWRpcmVjdFVyaXM6IFtwcm9jZXNzLmVudi5YRVJPX1JFRElSRUNUX1VSSSFdLFxyXG4gICAgc2NvcGVzOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCIsIFwiZW1haWxcIiwgXCJvZmZsaW5lX2FjY2Vzc1wiLCBcImFjY291bnRpbmcuc2V0dGluZ3NcIl0sIC8vIGFkZCAncHJhY3RpY2VtYW5hZ2VyJyBhZnRlciBhcHByb3ZhbFxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVRva2VuU2V0KHRlbmFudElkOiBzdHJpbmcsIHRva2VuU2V0OiBUb2tlblNldCkge1xyXG4gIGNvbnN0IHRva2VuSnNvbiA9IEpTT04uc3RyaW5naWZ5KHRva2VuU2V0KTtcclxuICBjb25zdCBleHBpcmVzQXQgPSB0b2tlblNldC5leHBpcmVzX2F0XHJcbiAgICA/IG5ldyBEYXRlKHRva2VuU2V0LmV4cGlyZXNfYXQgKiAxMDAwKS50b0lTT1N0cmluZygpXHJcbiAgICA6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzNjAwXzAwMCkudG9JU09TdHJpbmcoKTtcclxuICBcclxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oXCJ4ZXJvX3Rva2Vuc1wiKS51cHNlcnQoe1xyXG4gICAgdGVuYW50X2lkOiB0ZW5hbnRJZCxcclxuICAgIHRva2VuX3NldF9lbmM6IGVuY3J5cHQodG9rZW5Kc29uKSxcclxuICAgIGV4cGlyZXNfYXQ6IGV4cGlyZXNBdCxcclxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICB9LCB7IG9uQ29uZmxpY3Q6IFwidGVuYW50X2lkXCIgfSk7XHJcbiAgXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRUb2tlblNldCh0ZW5hbnRJZDogc3RyaW5nKTogUHJvbWlzZTxUb2tlblNldD4ge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgIC5mcm9tKFwieGVyb190b2tlbnNcIilcclxuICAgIC5zZWxlY3QoXCIqXCIpXHJcbiAgICAuZXEoXCJ0ZW5hbnRfaWRcIiwgdGVuYW50SWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICBpZiAoZXJyb3IgfHwgIWRhdGEpIHRocm93IG5ldyBFcnJvcihcIk5vIHRva2VuIGZvciB0ZW5hbnRcIik7XHJcbiAgcmV0dXJuIEpTT04ucGFyc2UoZGVjcnlwdChkYXRhLnRva2VuX3NldF9lbmMpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENsaWVudFdpdGhUb2tlbnModGVuYW50SWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHhlcm8gPSBuZXdYZXJvQ2xpZW50KCk7XHJcbiAgY29uc3QgdG9rZW5TZXQgPSBhd2FpdCBsb2FkVG9rZW5TZXQodGVuYW50SWQpO1xyXG4gIHhlcm8uc2V0VG9rZW5TZXQodG9rZW5TZXQpO1xyXG4gIFxyXG4gIC8vIHJlZnJlc2ggaWYgbmVlZGVkXHJcbiAgY29uc3QgZXhwID0gdG9rZW5TZXQuZXhwaXJlc19hdCA/IHRva2VuU2V0LmV4cGlyZXNfYXQgKiAxMDAwIDogMDtcclxuICBpZiAoZXhwICYmIGV4cCA8IERhdGUubm93KCkgKyA2MF8wMDApIHtcclxuICAgIGNvbnN0IHJlZnJlc2hlZCA9IGF3YWl0IHhlcm8ucmVmcmVzaFRva2VuKCk7XHJcbiAgICBjb25zdCB0ZW5hbnRzID0gYXdhaXQgeGVyby51cGRhdGVUZW5hbnRzKCk7XHJcbiAgICBjb25zdCB0aWQgPSB0ZW5hbnRzPy5bMF0/LnRlbmFudElkIHx8IHRlbmFudElkO1xyXG4gICAgYXdhaXQgc2F2ZVRva2VuU2V0KHRpZCwgcmVmcmVzaGVkKTtcclxuICAgIHJldHVybiB7IHhlcm8sIHRlbmFudElkOiB0aWQgfTtcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgdGVuYW50cyA9IGF3YWl0IHhlcm8udXBkYXRlVGVuYW50cygpO1xyXG4gIHJldHVybiB7IHhlcm8sIHRlbmFudElkOiB0ZW5hbnRzPy5bMF0/LnRlbmFudElkIHx8IHRlbmFudElkIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIlhlcm9DbGllbnQiLCJzdXBhYmFzZUFkbWluIiwiZW5jcnlwdCIsImRlY3J5cHQiLCJuZXdYZXJvQ2xpZW50IiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiWEVST19DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJYRVJPX0NMSUVOVF9TRUNSRVQiLCJyZWRpcmVjdFVyaXMiLCJYRVJPX1JFRElSRUNUX1VSSSIsInNjb3BlcyIsInNhdmVUb2tlblNldCIsInRlbmFudElkIiwidG9rZW5TZXQiLCJ0b2tlbkpzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiZXhwaXJlc0F0IiwiZXhwaXJlc19hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm5vdyIsImVycm9yIiwiZnJvbSIsInVwc2VydCIsInRlbmFudF9pZCIsInRva2VuX3NldF9lbmMiLCJ1cGRhdGVkX2F0Iiwib25Db25mbGljdCIsIkVycm9yIiwibWVzc2FnZSIsImxvYWRUb2tlblNldCIsImRhdGEiLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsInBhcnNlIiwiZ2V0Q2xpZW50V2l0aFRva2VucyIsInhlcm8iLCJzZXRUb2tlblNldCIsImV4cCIsInJlZnJlc2hlZCIsInJlZnJlc2hUb2tlbiIsInRlbmFudHMiLCJ1cGRhdGVUZW5hbnRzIiwidGlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/xero.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/xero-node@13.0.0","vendor-chunks/tr46@0.0.3","vendor-chunks/jose@4.15.9","vendor-chunks/@supabase+auth-js@2.71.1","vendor-chunks/axios@1.12.2","vendor-chunks/mime-db@1.52.0","vendor-chunks/openid-client@5.7.1","vendor-chunks/@supabase+realtime-js@2.15.5","vendor-chunks/@supabase+node-fetch@2.6.15","vendor-chunks/@supabase+postgrest-js@1.21.4","vendor-chunks/@supabase+storage-js@2.12.1","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/follow-redirects@1.15.11","vendor-chunks/debug@4.4.3","vendor-chunks/@supabase+supabase-js@2.57.4","vendor-chunks/object-hash@2.2.0","vendor-chunks/get-intrinsic@1.3.0","vendor-chunks/form-data@4.0.4","vendor-chunks/yallist@4.0.0","vendor-chunks/lru-cache@6.0.0","vendor-chunks/asynckit@0.4.0","vendor-chunks/@supabase+functions-js@2.4.6","vendor-chunks/combined-stream@1.0.8","vendor-chunks/webidl-conversions@3.0.1","vendor-chunks/mime-types@2.1.35","vendor-chunks/proxy-from-env@1.1.0","vendor-chunks/oidc-token-hash@5.1.1","vendor-chunks/ms@2.1.3","vendor-chunks/supports-color@7.2.0","vendor-chunks/has-symbols@1.1.0","vendor-chunks/delayed-stream@1.0.0","vendor-chunks/function-bind@1.1.2","vendor-chunks/es-set-tostringtag@2.1.0","vendor-chunks/call-bind-apply-helpers@1.0.2","vendor-chunks/get-proto@1.0.1","vendor-chunks/dunder-proto@1.0.1","vendor-chunks/math-intrinsics@1.1.0","vendor-chunks/es-errors@1.3.0","vendor-chunks/has-flag@4.0.0","vendor-chunks/es-define-property@1.0.1","vendor-chunks/gopd@1.2.0","vendor-chunks/hasown@2.0.2","vendor-chunks/has-tostringtag@1.0.2","vendor-chunks/es-object-atoms@1.1.1"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.0.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fxero%2Fcallback%2Froute&page=%2Fapi%2Fxero%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fxero%2Fcallback%2Froute.ts&appDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmayin%5CDesktop%5Cxero_test&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();